<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="w3css4.css">
    <title>GatePass</title>
</head>
<body>
    <div class="w3-row w3-sand w3-bottombar w3-leftbar w3-topbar w3-rightbar w3-border-aqua" style="height:100vh ;">
        <div class="w3-half w3-rightbar  w3-border-aqua w3-display-container" style="height: 100vh;">
            <div class="w3-cell-row ">
                <div class="w3-cell" style="padding: 1%;">                    
                    <input class="w3-input w3-card" type="text" name="gatePassID" id="gatePassID" disabled >
                </div>
            </div>
            <div class="w3-cell-row">
                <div class="w3-cell" style="padding: 1%;">                    
                    <input class="w3-input w3-card" type="datetime" name="gpdate" id="gpdate" disabled>
                </div>                
            </div>
            <div class="w3-cell-row">                
                <div class="w3-cell" style="padding: 1%;">                    
                    <input class="w3-select w3-card" type="text" onchange="displayjobfromvesselname()" name="VesselNameSelected" id="VesselNameSelected" list="vesselList" placeholder="Select Vessel Name">
                </div>
            </div>
            <div class="w3-cell-row">                
                <div class="w3-cell" style="padding: 1%;">                    
                    <input class="w3-input w3-card" type="text" name="truckno" id="truckno" placeholder="Truck No">
                </div>
            </div>
            <div class="w3-cell-row">
                <table class="w3-table w3-small" id="gatepassupdatetable">
                    <thead class="w3-card w3-brown">
                        <th class="w3-border" style="white-space: nowrap;">Job No</th>
                        <th class="w3-border" colspan="3" >Marks/Packing/Location</th>
                        <th class="w3-border">Bags</th>                        
                        <th class="w3-border w3-center" colspan="2">Action</th>
                    </thead>
                    <thead class="w3-khaki">
                     <tr>
                        <td class="w3-border">
                            <select class="w3-select w3-card w3-input" onchange="displaymarksfromjobno()" name="jobnoselected" id="jobnoselected">
                            </select>
                        </td>
                        <td class="w3-border" colspan="3">
                            <select class="w3-select w3-card w3-input" onchange="displaydetailssecondcontainermarkswise()" name="markspackingselected" id="markspackingselected"></select>
                        </td>
                        <td class="w3-border">
                            <input class="w3-input w3-card" type="number" name="bagsgatepass" id="bagsgatepass">
                        </td>                        
                        <td class="w3-border" colspan="2">
                            <button class="w3-button w3-input w3-blue w3-card" id="creategatepassbtn" onclick="creategatepass()" >Add</button>
                        </td>                        
                     </tr>
                    </thead>
                    <tfoot class="w3-brown">
                        <th colspan="3" class="w3-border">Total</th>
                        <th class="w3-border"></th>
                        <th class="w3-border w3-right-align"></th>
                        <th class="w3-border w3-right-align"></th>
                        <th class="w3-border" colspan="2"></th>
                    </tfoot>
                </table>
            </div>
            <div class="w3-cell-row w3-card w3-border w3-border-aqua w3-display-bottommiddle" style="margin-bottom: 2%; padding: 1%;">
                <div class="w3-cell">
                    <button class="w3-ripple w3-round w3-blue" onclick="displaymodal(document.getElementById('searcholdgatepass'))">Search</button>
                </div>
                
                <div class="w3-cell">
                    <button class="w3-ripple w3-round w3-green">Print Pass</button>
                </div>
                <div class="w3-cell">
                    <button class="w3-ripple w3-round w3-green w3-indigo">Print EA</button>
                </div>
                <div class="w3-cell">
                    <button class="w3-ripple w3-round w3-green w3-indigo">Print EA</button>
                </div>
                <div class="w3-cell">
                    <button class="w3-ripple w3-round w3-green w3-indigo">Print EA</button>
                </div>
            </div>
        </div>
        <div class="w3-modal" id="searcholdgatepass">
            <div class="w3-modal-content">
                <div class="w3-cell-row">
                    <table class="w3-table w3-small" id="searcholdgatepasstable">
                        <thead>
                            <th class="w3-border" colspan="3"><input class="w3-input w3-border" type="text" name="searchtrknum" id="searchtrknum" placeholder="Truck No"></th>
                            <th class="w3-border"><input class="w3-input w3-border" type="text" name="searchnumship" id="searchnumship" placeholder="Shipper Name"></th>
                            <th class="w3-border" colspan="2"><input class="w3-input w3-border" type="text" name="searchnumjob" id="searchnumjob" placeholder="job No"></th>
                            <th class="w3-border" ><input class="w3-input w3-border" type="date" name="searchnumdate" id="searchnumdate" ></th>
                            <th class="w3-border"><button class="w3-button w3-khaki" onclick="searcholdgatepassbtn()">Search</button></th>
                            <th class="w3-border"><button class="w3-button w3-red" onclick="hidemodal(document.getElementById('searcholdgatepass'))">Close</button></th>
                        </thead>
                        <thead>
                            <th class="w3-border"style="white-space: nowrap;">Gate Pass No</th>
                            <th class="w3-border"style="white-space: nowrap;">Truck No</th>
                            <th class="w3-border"style="white-space: nowrap;">Job No</th>
                            <th class="w3-border">Shipper name</th>                            
                            <th class="w3-border"style="white-space: nowrap;">Date</th>
                            <th class="w3-border"style="white-space: nowrap;">Marks</th>
                            <th class="w3-border"style="white-space: nowrap;">Packing</th>
                            <th class="w3-border"style="white-space: nowrap;">Location</th>
                            <th class="w3-border w3-center" >Action</th>
                        </thead>
                    </table>
                </div>
            </div>
        </div>
        <div class="w3-rest w3-border-aqua" style="height: 100vh;">
            <div class="w3-cell-row ">
                <div class="w3-cell w3-center">
                    <label style="font-weight: bold;" >Details</label>
                </div>
            </div>
            <div class="w3-small" id="secondContainer"></div>           
        </div>
        </div>
    </div>
    <datalist id="vesselList"></datalist>
</body>
<script src="jsFile.js"></script>
<script src="module.js"></script>
<script>
    window.onload=function(){
    var date = new Date();
    document.getElementById("gpdate").value=date;
    var xhttp=new XMLHttpRequest();
    var list=document.getElementById("vesselList");
    list.innerHTML="";
    xhttp.onreadystatechange=function(){
        if(this.readyState==4&&this.status==200){
            var myobj=JSON.parse(this.responseText);
            myobj.forEach((myobj,index)=>{
                var options=document.createElement("option");
                options.innerHTML=myobj.VesselName;
                list.appendChild(options);
            });
            
        }
    }
    xhttp.open("GET","/getvessellist",true);
    xhttp.setRequestHeader('Content-Type','application/X-www-form-urlencoded');
    xhttp.send();
}
</script>
</html>